<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CPTUX ðŸš€</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="cptx_files/libs/clipboard/clipboard.min.js"></script>
<script src="cptx_files/libs/quarto-html/quarto.js"></script>
<script src="cptx_files/libs/quarto-html/popper.min.js"></script>
<script src="cptx_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cptx_files/libs/quarto-html/anchor.min.js"></script>
<link href="cptx_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cptx_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cptx_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cptx_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cptx_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="cptx_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="cptx_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script type="module" src="cptx_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="cptx_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div class="page-layout-custom">  

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CPTUX ðŸš€</h1>
<p class="subtitle lead">Visual and numerical exploration of CPTU data and more</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="utils" class="level1 hidden">
<h1 class="hidden">UTILS</h1>
<p>Useful stuff which we donâ€™t want to show on screen.</p>
<section id="plot-update" class="level2">
<h2 data-anchor-id="plot-update">Plot update</h2>
<p>Update to Plot latest version, by overwritting existing Plot version.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="29" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 28;"><span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>Plot <span class="op">=</span> <span class="im">import</span>(<span class="st">"https://esm.sh/@observablehq/plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="theme" class="level2">
<h2 data-anchor-id="theme">Theme</h2>
<p>Create a base theme which allows switching between <em>light</em> and <em>dark</em> themes. Light theme the default one.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="39" data-source-offset="-16"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 38;"><span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>theme_base <span class="op">=</span> ({</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fontSize</span><span class="op">:</span> font_size<span class="op">,</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fontWeight</span><span class="op">:</span> font_weight<span class="op">,</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">background</span><span class="op">:</span> theme <span class="op">===</span> <span class="st">'light'</span> <span class="op">?</span> color_light <span class="op">:</span> color_dark<span class="op">,</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">color</span><span class="op">:</span> theme <span class="op">===</span> <span class="st">'light'</span> <span class="op">?</span> color_dark <span class="op">:</span> color_light<span class="op">,</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> margin_left<span class="op">,</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="co">// parameters</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>font_size <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>font_weight <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>margin_left <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>col_light <span class="op">=</span> <span class="st">'#f9f9f9'</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>col_dark <span class="op">=</span> <span class="st">'#1c1c1c'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="logo" class="level2">
<h2 data-anchor-id="logo">Logo</h2>
<p>Import NGI logo to use in plots.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="65" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 64;"><span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>logo_ngi <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"logo.svg"</span>)<span class="op">.</span><span class="fu">url</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="imports" class="level2">
<h2 data-anchor-id="imports">Imports</h2>
<p>Importing external libraries and functions.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="74" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 73;"><span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { aq<span class="op">,</span> op } <span class="im">from</span> <span class="st">"@uwdata/arquero"</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { build_samples } <span class="im">from</span> <span class="st">'@mcmcclur/adaptive-plotter'</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { rasterize } <span class="im">from</span> <span class="st">"@mbostock/saving-svg"</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { serialize } <span class="im">from</span> <span class="st">"@mbostock/saving-svg"</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { number } <span class="im">from</span> <span class="st">"@jashkenas/inputs"</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { getIconSvg } <span class="im">from</span> <span class="st">'@saneef/feather-icons'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Create tabset panels</p>
</section>
</section>
<section id="section" class="level1">
<h1></h1>
<div id="main-panels" class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Data <i class="fa-solid fa-folder" aria-label="folder"></i></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Plots <i class="fa-solid fa-chart-simple" aria-label="chart-simple"></i></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">Other</a></li></ul>
<div id="main-panels" class="tab-content nav-pills">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="panel-grid layout-sidebar ms-md-0 layout-sidebar-left">
<div id="controls" class="panel-sidebar card bg-light p-2 g-col-24 g-col-lg-7">
<p><code>Data upload and other control &amp; filter options</code> <i class="fa-solid fa-folder" aria-label="folder"></i></p>
<details>
<summary>
Show controls:
</summary>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="98" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 97;"><span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>viewof dt_cptu_file <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">file</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Load CSV file"</span><span class="op">,</span> <span class="dt">accept</span><span class="op">:</span> <span class="st">".csv"</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="co">//dt_cptu = dt_cptu_file.csv({typed: true}) uncomment later</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>dt_cptu <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">'data-source/dt_cpt_int.csv'</span>)<span class="op">.</span><span class="fu">csv</span>({<span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span>}) <span class="co">// interp</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>viewof filt_type <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_type</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil type:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>viewof filt_group <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_group</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil group:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>viewof filt_unit <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_unit</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil unit:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>viewof filt_loc <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">loc_id</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Location ID:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</details>
</div>
<div class="panel-fill panel-grid g-col-24 g-col-lg-17 pt-3 pt-lg-0">
<div class="g-col-24">
<div id="view" class="panel-fill">
<p><code>View CPTU data in table</code></p>
<details>
<summary>
Show table:
</summary>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="124" data-source-offset="-23"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 123;"><span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> aq</span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">from</span>(dt_cptu)</span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">// select only columns we need</span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">select</span>(aq<span class="op">.</span><span class="fu">range</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">72</span>)<span class="op">,</span> <span class="dv">141</span><span class="op">,</span> <span class="dv">142</span>)</span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a><span class="co">// table</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>viewof dt_cptu_table <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(dt<span class="op">,</span> {<span class="dt">rows</span><span class="op">:</span> <span class="dv">15</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</details>
<div class="grid">
<div id="tables" class="g-col-6 theme-new">
<p><code>Tables</code></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="143" data-source-offset="-25"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 142;"><span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>dt_count_cols <span class="op">=</span> dt<span class="op">.</span><span class="fu">numCols</span>()</span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>dt_count_rows <span class="op">=</span> dt<span class="op">.</span><span class="fu">numRows</span>()</span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>dt_count_type <span class="op">=</span> dt<span class="op">.</span><span class="fu">select</span>(<span class="st">"soil_type"</span>)<span class="op">.</span><span class="fu">dedupe</span>()<span class="op">.</span><span class="fu">array</span>(<span class="st">"soil_type"</span>)<span class="op">.</span><span class="at">length</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>dt_count_group <span class="op">=</span> dt<span class="op">.</span><span class="fu">select</span>(<span class="st">"soil_group"</span>)<span class="op">.</span><span class="fu">dedupe</span>()<span class="op">.</span><span class="fu">array</span>(<span class="st">"soil_group"</span>)<span class="op">.</span><span class="at">length</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>dt_count_unit <span class="op">=</span> dt<span class="op">.</span><span class="fu">select</span>(<span class="st">"soil_unit"</span>)<span class="op">.</span><span class="fu">dedupe</span>()<span class="op">.</span><span class="fu">array</span>(<span class="st">"soil_unit"</span>)<span class="op">.</span><span class="at">length</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>dt_count_loc <span class="op">=</span> dt<span class="op">.</span><span class="fu">select</span>(<span class="st">"loc_id"</span>)<span class="op">.</span><span class="fu">dedupe</span>()<span class="op">.</span><span class="fu">array</span>(<span class="st">"loc_id"</span>)<span class="op">.</span><span class="at">length</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p><em>General info:</em></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="154" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 153;"><span id="cb8-154"><a href="#cb8-154" aria-hidden="true" tabindex="-1"></a>stats_info <span class="op">=</span> aq<span class="op">.</span><span class="fu">table</span>({</span>
<span id="cb8-155"><a href="#cb8-155" aria-hidden="true" tabindex="-1"></a>  <span class="dt">item</span><span class="op">:</span> [<span class="st">'Columns'</span><span class="op">,</span> <span class="st">'Rows'</span><span class="op">,</span> <span class="st">'Soil types'</span><span class="op">,</span> <span class="st">'Soil groups'</span><span class="op">,</span> <span class="st">'Soil units'</span><span class="op">,</span> <span class="st">'Locations'</span>]<span class="op">,</span></span>
<span id="cb8-156"><a href="#cb8-156" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> [dt_count_cols<span class="op">,</span> dt_count_rows<span class="op">,</span> dt_count_type<span class="op">,</span> dt_count_group<span class="op">,</span> dt_count_unit<span class="op">,</span> dt_count_loc]</span>
<span id="cb8-157"><a href="#cb8-157" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb8-158"><a href="#cb8-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-159"><a href="#cb8-159" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(stats_info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p><em>Descriptive statistics:</em></p>
<div id="desc-stats" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><code>Soil type</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><code>Soil group</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href=""><code>Soil unit</code></a></li></ul>
<div id="desc-stats" class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="169" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 168;"><span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a>stats_type <span class="op">=</span> dt</span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">groupby</span>(<span class="st">"soil_type"</span>)</span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rollup</span>({</span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a>    <span class="dt">count</span><span class="op">:</span> d <span class="kw">=&gt;</span> op<span class="op">.</span><span class="fu">count</span>()<span class="op">,</span></span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.05</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.10</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">median</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.90</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.95</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(stats_type<span class="op">,</span> {</span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-9-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-9-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="200" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 199;"><span id="cb10-200"><a href="#cb10-200" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Download data here: </span><span class="sc">${</span><span class="fu">getIconSvg</span>(<span class="st">"download"</span>)<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="202" data-source-offset="-53"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 201;"><span id="cb11-202"><a href="#cb11-202" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { desc_stats } <span class="im">from</span> <span class="st">"./utils.js"</span></span>
<span id="cb11-203"><a href="#cb11-203" aria-hidden="true" tabindex="-1"></a><span class="fu">desc_stats</span>(dt<span class="op">,</span> <span class="st">"soil_type"</span>)<span class="op">.</span><span class="fu">view</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="209" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 208;"><span id="cb12-209"><a href="#cb12-209" aria-hidden="true" tabindex="-1"></a>stats_group <span class="op">=</span> dt</span>
<span id="cb12-210"><a href="#cb12-210" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">groupby</span>(<span class="st">"soil_group"</span>)</span>
<span id="cb12-211"><a href="#cb12-211" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rollup</span>({</span>
<span id="cb12-212"><a href="#cb12-212" aria-hidden="true" tabindex="-1"></a>    <span class="dt">count</span><span class="op">:</span> d <span class="kw">=&gt;</span> op<span class="op">.</span><span class="fu">count</span>()<span class="op">,</span></span>
<span id="cb12-213"><a href="#cb12-213" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-214"><a href="#cb12-214" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-215"><a href="#cb12-215" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-216"><a href="#cb12-216" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.05</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-217"><a href="#cb12-217" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.10</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-218"><a href="#cb12-218" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">median</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-219"><a href="#cb12-219" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.90</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-220"><a href="#cb12-220" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.95</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-221"><a href="#cb12-221" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb12-222"><a href="#cb12-222" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-223"><a href="#cb12-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-224"><a href="#cb12-224" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(stats_group<span class="op">,</span> {</span>
<span id="cb12-225"><a href="#cb12-225" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb12-226"><a href="#cb12-226" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-227"><a href="#cb12-227" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-228"><a href="#cb12-228" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-229"><a href="#cb12-229" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-230"><a href="#cb12-230" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-231"><a href="#cb12-231" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-232"><a href="#cb12-232" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-233"><a href="#cb12-233" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-234"><a href="#cb12-234" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-235"><a href="#cb12-235" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-236"><a href="#cb12-236" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="239" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 238;"><span id="cb13-239"><a href="#cb13-239" aria-hidden="true" tabindex="-1"></a><span class="fu">desc_stats</span>(dt<span class="op">,</span> <span class="st">"soil_group"</span>)<span class="op">.</span><span class="fu">view</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="246" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 245;"><span id="cb14-246"><a href="#cb14-246" aria-hidden="true" tabindex="-1"></a>stats_unit <span class="op">=</span> dt</span>
<span id="cb14-247"><a href="#cb14-247" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">groupby</span>(<span class="st">"soil_unit"</span>)</span>
<span id="cb14-248"><a href="#cb14-248" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rollup</span>({</span>
<span id="cb14-249"><a href="#cb14-249" aria-hidden="true" tabindex="-1"></a>    <span class="dt">count</span><span class="op">:</span> d <span class="kw">=&gt;</span> op<span class="op">.</span><span class="fu">count</span>()<span class="op">,</span></span>
<span id="cb14-250"><a href="#cb14-250" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-251"><a href="#cb14-251" aria-hidden="true" tabindex="-1"></a>    <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-252"><a href="#cb14-252" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-253"><a href="#cb14-253" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.05</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-254"><a href="#cb14-254" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.10</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-255"><a href="#cb14-255" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">median</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-256"><a href="#cb14-256" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.90</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-257"><a href="#cb14-257" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">quantile</span>(d<span class="op">.</span><span class="at">qc</span><span class="op">,</span> <span class="fl">0.95</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-258"><a href="#cb14-258" aria-hidden="true" tabindex="-1"></a>    <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(op<span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">qc</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb14-259"><a href="#cb14-259" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb14-260"><a href="#cb14-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-261"><a href="#cb14-261" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(stats_unit<span class="op">,</span> {</span>
<span id="cb14-262"><a href="#cb14-262" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb14-263"><a href="#cb14-263" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-264"><a href="#cb14-264" aria-hidden="true" tabindex="-1"></a>        <span class="dt">depth_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-265"><a href="#cb14-265" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_min</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-266"><a href="#cb14-266" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q05</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-267"><a href="#cb14-267" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q10</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-268"><a href="#cb14-268" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_med</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-269"><a href="#cb14-269" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q90</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-270"><a href="#cb14-270" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_q95</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-271"><a href="#cb14-271" aria-hidden="true" tabindex="-1"></a>        <span class="dt">qc_max</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-272"><a href="#cb14-272" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-273"><a href="#cb14-273" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-13-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="276" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 275;"><span id="cb15-276"><a href="#cb15-276" aria-hidden="true" tabindex="-1"></a><span class="fu">desc_stats</span>(dt<span class="op">,</span> <span class="st">"soil_unit"</span>)<span class="op">.</span><span class="fu">view</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="plots" class="g-col-6 theme-test">
<p><code>Plots</code></p>
<p><em>Histograms:</em></p>
<div id="hist" class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><code>q</code><sub><code>c</code></sub></a></li></ul>
<div id="hist" class="tab-content nav-pills">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="293" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 292;"><span id="cb16-293"><a href="#cb16-293" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb16-294"><a href="#cb16-294" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb16-295"><a href="#cb16-295" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb16-296"><a href="#cb16-296" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {<span class="dt">nice</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"qc"</span>}<span class="op">,</span></span>
<span id="cb16-297"><a href="#cb16-297" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fy</span><span class="op">:</span> {<span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span>}<span class="op">,</span></span>
<span id="cb16-298"><a href="#cb16-298" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb16-299"><a href="#cb16-299" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb16-300"><a href="#cb16-300" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">areaY</span>(dt_cptu<span class="op">,</span> Plot<span class="op">.</span><span class="fu">binX</span>({<span class="dt">y</span><span class="op">:</span> <span class="st">"count"</span><span class="op">,</span> <span class="dt">filter</span><span class="op">:</span> <span class="kw">null</span>}<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">fy</span><span class="op">:</span> <span class="st">"soil_group"</span><span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.25</span>}))<span class="op">,</span></span>
<span id="cb16-301"><a href="#cb16-301" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">ruleX</span>(stats_group<span class="op">,</span> {<span class="dt">filter</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span> <span class="op">&gt;=</span> <span class="dv">100</span><span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"qc_med"</span><span class="op">,</span> <span class="dt">fy</span><span class="op">:</span> <span class="st">"soil_group"</span>})<span class="op">,</span></span>
<span id="cb16-302"><a href="#cb16-302" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">text</span>(stats_group<span class="op">,</span> {<span class="dt">filter</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span> <span class="op">&gt;=</span> <span class="dv">100</span><span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"qc_med"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">fy</span><span class="op">:</span> <span class="st">"soil_group"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"qc_med"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">10</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">'black'</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">'white'</span>})</span>
<span id="cb16-303"><a href="#cb16-303" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb16-304"><a href="#cb16-304" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="panel-input card bg-light p-2 quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><code>Some inputs for following plots</code></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="325" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 324;"><span id="cb17-325"><a href="#cb17-325" aria-hidden="true" tabindex="-1"></a>viewof filt_type2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_type</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil type:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb17-326"><a href="#cb17-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-327"><a href="#cb17-327" aria-hidden="true" tabindex="-1"></a>viewof ddd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb17-328"><a href="#cb17-328" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"r"</span>})<span class="op">,</span></span>
<span id="cb17-329"><a href="#cb17-329" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"g"</span>})<span class="op">,</span></span>
<span id="cb17-330"><a href="#cb17-330" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"b"</span>})<span class="op">,</span></span>
<span id="cb17-331"><a href="#cb17-331" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb17-332"><a href="#cb17-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-333"><a href="#cb17-333" aria-hidden="true" tabindex="-1"></a>viewof filt_group2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_group</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil group:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb17-334"><a href="#cb17-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-335"><a href="#cb17-335" aria-hidden="true" tabindex="-1"></a>viewof filt_unit2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_unit</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil unit:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb17-336"><a href="#cb17-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-337"><a href="#cb17-337" aria-hidden="true" tabindex="-1"></a>viewof filt_loc2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">loc_id</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Location ID:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb17-338"><a href="#cb17-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-339"><a href="#cb17-339" aria-hidden="true" tabindex="-1"></a>viewof plotdiv <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">2</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Width divider:"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="panel-input card bg-light p-2 quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><code>Some inputs for following plots</code></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="349" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 348;"><span id="cb18-349"><a href="#cb18-349" aria-hidden="true" tabindex="-1"></a>viewof filt_type23 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_type</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil type:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb18-350"><a href="#cb18-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-351"><a href="#cb18-351" aria-hidden="true" tabindex="-1"></a>viewof filt_group23 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_group</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil group:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb18-352"><a href="#cb18-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-353"><a href="#cb18-353" aria-hidden="true" tabindex="-1"></a>viewof filt_unit23 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_unit</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Soil unit:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb18-354"><a href="#cb18-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-355"><a href="#cb18-355" aria-hidden="true" tabindex="-1"></a>viewof filt_loc23 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(dt_cptu<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">loc_id</span>))<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Location ID:"</span><span class="op">,</span> <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">sort</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">unique</span><span class="op">:</span> <span class="kw">true</span>})</span>
<span id="cb18-356"><a href="#cb18-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-357"><a href="#cb18-357" aria-hidden="true" tabindex="-1"></a>viewof plotdiv2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">2</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Width divider:"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><code>Plots</code></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="367" data-source-offset="-46"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 366;"><span id="cb19-367"><a href="#cb19-367" aria-hidden="true" tabindex="-1"></a>dt_cptu_small <span class="op">=</span> dt_cptu</span>
<span id="cb19-368"><a href="#cb19-368" aria-hidden="true" tabindex="-1"></a>  <span class="co">//.params({ filt_unit2, filt_loc2 })</span></span>
<span id="cb19-369"><a href="#cb19-369" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_unit</span> <span class="op">==</span> filt_unit2 <span class="op">&amp;&amp;</span> d<span class="op">.</span><span class="at">loc_id</span> <span class="op">==</span> filt_loc2)</span>
<span id="cb19-370"><a href="#cb19-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-371"><a href="#cb19-371" aria-hidden="true" tabindex="-1"></a>plot01 <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb19-372"><a href="#cb19-372" aria-hidden="true" tabindex="-1"></a>  <span class="dt">caption</span><span class="op">:</span> <span class="st">"Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption."</span><span class="op">,</span></span>
<span id="cb19-373"><a href="#cb19-373" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">750</span><span class="op">,</span></span>
<span id="cb19-374"><a href="#cb19-374" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> (width <span class="op">-</span> <span class="dv">70</span>)<span class="op">/</span><span class="dv">2</span><span class="op">,</span></span>
<span id="cb19-375"><a href="#cb19-375" aria-hidden="true" tabindex="-1"></a>  <span class="co">//marginLeft: 0,</span></span>
<span id="cb19-376"><a href="#cb19-376" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb19-377"><a href="#cb19-377" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"CONE RESISTANCE, qc (MPa)"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">75</span>]}<span class="op">,</span></span>
<span id="cb19-378"><a href="#cb19-378" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"DEPTH, z (m)"</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">50</span>]}<span class="op">,</span></span>
<span id="cb19-379"><a href="#cb19-379" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-380"><a href="#cb19-380" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb19-381"><a href="#cb19-381" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb19-382"><a href="#cb19-382" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span>})<span class="op">,</span></span>
<span id="cb19-383"><a href="#cb19-383" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"bottom"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>})<span class="op">,</span></span>
<span id="cb19-384"><a href="#cb19-384" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisY</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span> <span class="dt">tickSpacing</span><span class="op">:</span> <span class="dv">50</span>})<span class="op">,</span></span>
<span id="cb19-385"><a href="#cb19-385" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(dt_cptu_small<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="st">"loc_id"</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">2.5</span><span class="op">,</span> <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">,</span></span>
<span id="cb19-386"><a href="#cb19-386" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dt_cptu_small<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectMaxY</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"bottom-left"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}))</span>
<span id="cb19-387"><a href="#cb19-387" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb19-388"><a href="#cb19-388" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-18-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-18-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="391" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 390;"><span id="cb20-391"><a href="#cb20-391" aria-hidden="true" tabindex="-1"></a>plot02 <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb20-392"><a href="#cb20-392" aria-hidden="true" tabindex="-1"></a>  <span class="dt">caption</span><span class="op">:</span> <span class="st">"Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption."</span><span class="op">,</span></span>
<span id="cb20-393"><a href="#cb20-393" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">750</span><span class="op">,</span></span>
<span id="cb20-394"><a href="#cb20-394" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> (width <span class="op">-</span> <span class="dv">70</span>)<span class="op">/</span><span class="dv">4</span><span class="op">,</span></span>
<span id="cb20-395"><a href="#cb20-395" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb20-396"><a href="#cb20-396" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb20-397"><a href="#cb20-397" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"CONE RESISTANCE, qc (MPa)"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">75</span>]}<span class="op">,</span></span>
<span id="cb20-398"><a href="#cb20-398" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">50</span>]}<span class="op">,</span></span>
<span id="cb20-399"><a href="#cb20-399" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb20-400"><a href="#cb20-400" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb20-401"><a href="#cb20-401" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb20-402"><a href="#cb20-402" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span>})<span class="op">,</span></span>
<span id="cb20-403"><a href="#cb20-403" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"bottom"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>})<span class="op">,</span></span>
<span id="cb20-404"><a href="#cb20-404" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisY</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span> <span class="dt">tickSpacing</span><span class="op">:</span> <span class="dv">50</span>})<span class="op">,</span></span>
<span id="cb20-405"><a href="#cb20-405" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(dt_cptu_small<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="st">"loc_id"</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">2.5</span><span class="op">,</span> <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">,</span></span>
<span id="cb20-406"><a href="#cb20-406" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dt_cptu_small<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectMaxY</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"bottom-left"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}))</span>
<span id="cb20-407"><a href="#cb20-407" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb20-408"><a href="#cb20-408" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="412" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 411;"><span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a>plot03 <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a>  <span class="dt">caption</span><span class="op">:</span> <span class="fu">md</span><span class="vs">`Figure 1. Plot of data for *</span><span class="sc">${</span>filt_type23<span class="sc">}</span><span class="vs">* soil type, </span><span class="sc">${</span>filt_group23<span class="sc">}</span><span class="vs"> soil group, in location **</span><span class="sc">${</span>filt_loc23<span class="sc">}</span><span class="vs">**.`</span><span class="op">,</span></span>
<span id="cb21-414"><a href="#cb21-414" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">750</span><span class="op">,</span></span>
<span id="cb21-415"><a href="#cb21-415" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> (width <span class="op">-</span> <span class="dv">70</span>)<span class="op">/</span><span class="dv">4</span><span class="op">,</span></span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"CONE RESISTANCE, qc (MPa)"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">75</span>]}<span class="op">,</span></span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">50</span>]}<span class="op">,</span></span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span>})<span class="op">,</span></span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisX</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"bottom"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>})<span class="op">,</span></span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">axisY</span>({<span class="dt">anchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span> <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span> <span class="dt">tickSpacing</span><span class="op">:</span> <span class="dv">50</span>})<span class="op">,</span></span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(dt_cptu_small<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="st">"loc_id"</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">2.5</span><span class="op">,</span> <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">,</span></span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dt_cptu_small<span class="op">,</span> Plot<span class="op">.</span><span class="fu">selectMaxY</span>({<span class="dt">x</span><span class="op">:</span> <span class="st">"qc"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"depth"</span><span class="op">,</span> <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"bottom-left"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}))</span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="437" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 436;"><span id="cb22-437"><a href="#cb22-437" aria-hidden="true" tabindex="-1"></a>viewof strokew <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Stroke width:"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="442" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 441;"><span id="cb23-442"><a href="#cb23-442" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { square } <span class="im">from</span> <span class="st">"./utils.js"</span></span>
<span id="cb23-443"><a href="#cb23-443" aria-hidden="true" tabindex="-1"></a><span class="fu">square</span>(strokew)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-22-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-22-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb24" data-startfrom="447" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 446;"><span id="cb24-447"><a href="#cb24-447" aria-hidden="true" tabindex="-1"></a>viewof paramx <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="st">"qc"</span><span class="op">,</span> <span class="st">"Ic"</span>]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Parameter x:"</span>})</span>
<span id="cb24-448"><a href="#cb24-448" aria-hidden="true" tabindex="-1"></a>viewof paramy <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="st">"depth"</span><span class="op">,</span> <span class="st">"fs"</span>]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Parameter y:"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-23-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-23-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb25" data-startfrom="451" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 450;"><span id="cb25-451"><a href="#cb25-451" aria-hidden="true" tabindex="-1"></a>viewof show <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Show?"</span>}) <span class="co">// show plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb26" data-startfrom="456" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 455;"><span id="cb26-456"><a href="#cb26-456" aria-hidden="true" tabindex="-1"></a>dt_cptu_plot <span class="op">=</span> dt_cptu<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">soil_unit</span> <span class="op">==</span> <span class="st">"F S"</span>)</span>
<span id="cb26-457"><a href="#cb26-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-458"><a href="#cb26-458" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { funcpl } <span class="im">from</span> <span class="st">"./utils.js"</span></span>
<span id="cb26-459"><a href="#cb26-459" aria-hidden="true" tabindex="-1"></a><span class="fu">funcpl</span>(dt_cptu_plot<span class="op">,</span> dt_cptu_plot<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">qc</span>)<span class="op">,</span> dt_cptu_plot<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">depth</span>)<span class="op">,</span> show)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-25-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-25-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-25-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="460" data-source-offset="-234"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 459;"><span id="cb27-460"><a href="#cb27-460" aria-hidden="true" tabindex="-1"></a><span class="fu">funcpl</span>(dt_cptu_plot<span class="op">,</span> paramx<span class="op">,</span> paramy<span class="op">,</span> show<span class="op">,</span> strokew)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-25-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
<section id="conditional-inputs" class="level1">
<h1>Conditional inputs</h1>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="465" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 464;"><span id="cb28-465"><a href="#cb28-465" aria-hidden="true" tabindex="-1"></a>viewof showparams <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([<span class="st">"hide"</span><span class="op">,</span> <span class="st">"show"</span>]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Additional?"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"hide"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="470" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 469;"><span id="cb29-470"><a href="#cb29-470" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { showpar } <span class="im">from</span> <span class="st">"./utils.js"</span></span>
<span id="cb29-471"><a href="#cb29-471" aria-hidden="true" tabindex="-1"></a><span class="fu">showpar</span>(showparams)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-27-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-27-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="476" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 475;"><span id="cb30-476"><a href="#cb30-476" aria-hidden="true" tabindex="-1"></a>viewof fff <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb30-477"><a href="#cb30-477" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"r"</span>})<span class="op">,</span></span>
<span id="cb30-478"><a href="#cb30-478" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"g"</span>})<span class="op">,</span></span>
<span id="cb30-479"><a href="#cb30-479" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"b"</span>})<span class="op">,</span></span>
<span id="cb30-480"><a href="#cb30-480" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"r"</span>})<span class="op">,</span></span>
<span id="cb30-481"><a href="#cb30-481" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"g"</span>})<span class="op">,</span></span>
<span id="cb30-482"><a href="#cb30-482" aria-hidden="true" tabindex="-1"></a>      Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">255</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"b"</span>})</span>
<span id="cb30-483"><a href="#cb30-483" aria-hidden="true" tabindex="-1"></a>    ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="declaration">

</div>
</div>
</div>
</section>
</div>
</div>
</div>
</section>



<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"Plot = import(\"https://esm.sh/@observablehq/plot\") \r\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"// plot themes\r\ntheme_base = ({\r\n    style: {\r\n        fontSize: font_size,\r\n        fontWeight: font_weight,\r\n        background: theme === 'light' ? color_light : color_dark,\r\n        color: theme === 'light' ? color_dark : color_light,\r\n    },\r\n    marginLeft: margin_left,\r\n    marginRight: 25,\r\n    marginTop: 25,\r\n    marginBottom: 50,\r\n    grid: true\r\n})\r\n\r\n// parameters\r\nfont_size = 14\r\nfont_weight = 500\r\nmargin_left = 50\r\ncol_light = '#f9f9f9'\r\ncol_dark = '#1c1c1c'\r\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"logo_ngi = FileAttachment(\"logo.svg\").url()\r\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"import { aq, op } from \"@uwdata/arquero\"\r\nimport { build_samples } from '@mcmcclur/adaptive-plotter'\r\nimport { rasterize } from \"@mbostock/saving-svg\"\r\nimport { serialize } from \"@mbostock/saving-svg\"\r\nimport { number } from \"@jashkenas/inputs\"\r\nimport { getIconSvg } from '@saneef/feather-icons'\r\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"viewof dt_cptu_file = Inputs.file({label: \"Load CSV file\", accept: \".csv\", required: true})\r\n//dt_cptu = dt_cptu_file.csv({typed: true}) uncomment later\r\ndt_cptu = FileAttachment('data-source/dt_cpt_int.csv').csv({typed: true}) // interp\r\n\r\nviewof filt_type = Inputs.select([null].concat(dt_cptu.map(d => d.soil_type)), {label: \"Soil type:\", multiple: true, sort: true, unique: true})\r\n\r\nviewof filt_group = Inputs.select([null].concat(dt_cptu.map(d => d.soil_group)), {label: \"Soil group:\", multiple: true, sort: true, unique: true})\r\n\r\nviewof filt_unit = Inputs.select([null].concat(dt_cptu.map(d => d.soil_unit)), {label: \"Soil unit:\", multiple: true, sort: true, unique: true})\r\n\r\nviewof filt_loc = Inputs.select([null].concat(dt_cptu.map(d => d.loc_id)), {label: \"Location ID:\", multiple: true, sort: true, unique: true})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"// create arquero df \r\ndt = aq\r\n    .from(dt_cptu)\r\n    // select only columns we need\r\n    .select(aq.range(0, 72), 141, 142)\r\n\r\n// table\r\nviewof dt_cptu_table = Inputs.table(dt, {rows: 15})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"// summary info on data\r\ndt_count_cols = dt.numCols()\r\ndt_count_rows = dt.numRows()\r\ndt_count_type = dt.select(\"soil_type\").dedupe().array(\"soil_type\").length\r\ndt_count_group = dt.select(\"soil_group\").dedupe().array(\"soil_group\").length\r\ndt_count_unit = dt.select(\"soil_unit\").dedupe().array(\"soil_unit\").length\r\ndt_count_loc = dt.select(\"loc_id\").dedupe().array(\"loc_id\").length\r\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"stats_info = aq.table({\r\n  item: ['Columns', 'Rows', 'Soil types', 'Soil groups', 'Soil units', 'Locations'],\r\n  value: [dt_count_cols, dt_count_rows, dt_count_type, dt_count_group, dt_count_unit, dt_count_loc]\r\n})\r\n\r\nInputs.table(stats_info)\r\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"stats_type = dt\r\n  .groupby(\"soil_type\")\r\n  .rollup({\r\n    count: d => op.count(),\r\n    depth_min: d => Math.round(op.min(d.depth) * 100) / 100,\r\n    depth_max: d => Math.round(op.max(d.depth) * 100) / 100,\r\n    qc_min: d => Math.round(op.min(d.qc) * 100) / 100,\r\n    qc_q05: d => Math.round(op.quantile(d.qc, 0.05) * 100) / 100,\r\n    qc_q10: d => Math.round(op.quantile(d.qc, 0.10) * 100) / 100,\r\n    qc_med: d => Math.round(op.median(d.qc) * 100) / 100,\r\n    qc_q90: d => Math.round(op.quantile(d.qc, 0.90) * 100) / 100,\r\n    qc_q95: d => Math.round(op.quantile(d.qc, 0.95) * 100) / 100,\r\n    qc_max: d => Math.round(op.max(d.qc) * 100) / 100,\r\n  })\r\n\r\nInputs.table(stats_type, {\r\n    format: {\r\n        depth_min: d => d.toFixed(2),\r\n        depth_max: d => d.toFixed(2),\r\n        qc_min: d => d.toFixed(2),\r\n        qc_q05: d => d.toFixed(2),\r\n        qc_q10: d => d.toFixed(2),\r\n        qc_med: d => d.toFixed(2),\r\n        qc_q90: d => d.toFixed(2),\r\n        qc_q95: d => d.toFixed(2),\r\n        qc_max: d => d.toFixed(2),\r\n  }\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"md`Download data here: ${getIconSvg(\"download\")}`\r\n\r\nimport { desc_stats } from \"./utils.js\"\r\ndesc_stats(dt, \"soil_type\").view()\r\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"stats_group = dt\r\n  .groupby(\"soil_group\")\r\n  .rollup({\r\n    count: d => op.count(),\r\n    depth_min: d => Math.round(op.min(d.depth) * 100) / 100,\r\n    depth_max: d => Math.round(op.max(d.depth) * 100) / 100,\r\n    qc_min: d => Math.round(op.min(d.qc) * 100) / 100,\r\n    qc_q05: d => Math.round(op.quantile(d.qc, 0.05) * 100) / 100,\r\n    qc_q10: d => Math.round(op.quantile(d.qc, 0.10) * 100) / 100,\r\n    qc_med: d => Math.round(op.median(d.qc) * 100) / 100,\r\n    qc_q90: d => Math.round(op.quantile(d.qc, 0.90) * 100) / 100,\r\n    qc_q95: d => Math.round(op.quantile(d.qc, 0.95) * 100) / 100,\r\n    qc_max: d => Math.round(op.max(d.qc) * 100) / 100,\r\n  })\r\n\r\nInputs.table(stats_group, {\r\n    format: {\r\n        depth_min: d => d.toFixed(2),\r\n        depth_max: d => d.toFixed(2),\r\n        qc_min: d => d.toFixed(2),\r\n        qc_q05: d => d.toFixed(2),\r\n        qc_q10: d => d.toFixed(2),\r\n        qc_med: d => d.toFixed(2),\r\n        qc_q90: d => d.toFixed(2),\r\n        qc_q95: d => d.toFixed(2),\r\n        qc_max: d => d.toFixed(2),\r\n  }\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"desc_stats(dt, \"soil_group\").view()\r\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"stats_unit = dt\r\n  .groupby(\"soil_unit\")\r\n  .rollup({\r\n    count: d => op.count(),\r\n    depth_min: d => Math.round(op.min(d.depth) * 100) / 100,\r\n    depth_max: d => Math.round(op.max(d.depth) * 100) / 100,\r\n    qc_min: d => Math.round(op.min(d.qc) * 100) / 100,\r\n    qc_q05: d => Math.round(op.quantile(d.qc, 0.05) * 100) / 100,\r\n    qc_q10: d => Math.round(op.quantile(d.qc, 0.10) * 100) / 100,\r\n    qc_med: d => Math.round(op.median(d.qc) * 100) / 100,\r\n    qc_q90: d => Math.round(op.quantile(d.qc, 0.90) * 100) / 100,\r\n    qc_q95: d => Math.round(op.quantile(d.qc, 0.95) * 100) / 100,\r\n    qc_max: d => Math.round(op.max(d.qc) * 100) / 100,\r\n  })\r\n\r\nInputs.table(stats_unit, {\r\n    format: {\r\n        depth_min: d => d.toFixed(2),\r\n        depth_max: d => d.toFixed(2),\r\n        qc_min: d => d.toFixed(2),\r\n        qc_q05: d => d.toFixed(2),\r\n        qc_q10: d => d.toFixed(2),\r\n        qc_med: d => d.toFixed(2),\r\n        qc_q90: d => d.toFixed(2),\r\n        qc_q95: d => d.toFixed(2),\r\n        qc_max: d => d.toFixed(2),\r\n  }\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"desc_stats(dt, \"soil_unit\").view()\r\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"Plot.plot({\r\n    width: 350,\r\n    grid: true,\r\n    x: {nice: true, label: \"qc\"},\r\n    fy: {padding: 0},\r\n    marks: [\r\n        Plot.frame(),\r\n        Plot.areaY(dt_cptu, Plot.binX({y: \"count\", filter: null}, {x: \"qc\", fy: \"soil_group\", fillOpacity: 0.25})),\r\n        Plot.ruleX(stats_group, {filter: (d) => d.count >= 100, x: \"qc_med\", fy: \"soil_group\"}),\r\n        Plot.text(stats_group, {filter: (d) => d.count >= 100, x: \"qc_med\", y: 0, fy: \"soil_group\", text: \"qc_med\", dx: 5, dy: -10, textAnchor: \"start\", fill: 'black', stroke: 'white'})\r\n    ]\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"viewof filt_type2 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_type)), {label: \"Soil type:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof ddd = Inputs.form([\r\n      Inputs.range([0, 255], {step: 1, label: \"r\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"g\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"b\"}),\r\n    ])\r\n\r\nviewof filt_group2 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_group)), {label: \"Soil group:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof filt_unit2 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_unit)), {label: \"Soil unit:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof filt_loc2 = Inputs.select([null].concat(dt_cptu.map(d => d.loc_id)), {label: \"Location ID:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof plotdiv = Inputs.range([2, 4], {step: 0.1, value: 3, label: \"Width divider:\"})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"viewof filt_type23 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_type)), {label: \"Soil type:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof filt_group23 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_group)), {label: \"Soil group:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof filt_unit23 = Inputs.select([null].concat(dt_cptu.map(d => d.soil_unit)), {label: \"Soil unit:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof filt_loc23 = Inputs.select([null].concat(dt_cptu.map(d => d.loc_id)), {label: \"Location ID:\", multiple: false, sort: true, unique: true})\r\n\r\nviewof plotdiv2 = Inputs.range([2, 4], {step: 0.1, value: 3, label: \"Width divider:\"})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"// Filter some data to create small subset\r\n\r\ndt_cptu_small = dt_cptu\r\n  //.params({ filt_unit2, filt_loc2 })\r\n  .filter((d) => d.soil_unit == filt_unit2 && d.loc_id == filt_loc2)\r\n\r\nplot01 = Plot.plot({\r\n  caption: \"Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption.\",\r\n  height: 750,\r\n  width: (width - 70)/2,\r\n  //marginLeft: 0,\r\n  marginRight: 5,\r\n  x: {label: \"CONE RESISTANCE, qc (MPa)\", domain: [0, 75]},\r\n  y: {label: \"DEPTH, z (m)\", reverse: true, domain: [0, 50]},\r\n  grid: true,\r\n  marks: [\r\n    Plot.frame(),\r\n    Plot.axisX({anchor: \"top\", labelAnchor: \"center\"}),\r\n    Plot.axisX({anchor: \"bottom\", label: null}),\r\n    Plot.axisY({anchor: \"left\", labelAnchor: \"center\", tickSpacing: 50}),\r\n    Plot.line(dt_cptu_small, {x: \"qc\", y: \"depth\", z: \"loc_id\", opacity: 0.25, strokeWidth: 2.5, tip: true, clip: true}),\r\n    Plot.text(dt_cptu_small, Plot.selectMaxY({x: \"qc\", y: \"depth\", text: \"depth\", frameAnchor: \"bottom-left\", dy: 10, fill: \"currentColor\", stroke: \"white\", strokeWidth: 3}))\r\n  ]\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"plot02 = Plot.plot({\r\n  caption: \"Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption. Figure 1. A chart with a title, subtitle, and caption.\",\r\n  height: 750,\r\n  width: (width - 70)/4,\r\n  marginLeft: 5,\r\n  marginRight: 5,\r\n  x: {label: \"CONE RESISTANCE, qc (MPa)\", domain: [0, 75]},\r\n  y: {label: null, reverse: true, domain: [0, 50]},\r\n  grid: true,\r\n  marks: [\r\n    Plot.frame(),\r\n    Plot.axisX({anchor: \"top\", labelAnchor: \"center\"}),\r\n    Plot.axisX({anchor: \"bottom\", label: null}),\r\n    Plot.axisY({anchor: \"left\", labelAnchor: \"center\", tickSpacing: 50}),\r\n    Plot.line(dt_cptu_small, {x: \"qc\", y: \"depth\", z: \"loc_id\", opacity: 0.25, strokeWidth: 2.5, tip: true, clip: true}),\r\n    Plot.text(dt_cptu_small, Plot.selectMaxY({x: \"qc\", y: \"depth\", text: \"depth\", frameAnchor: \"bottom-left\", dy: 10, fill: \"currentColor\", stroke: \"white\", strokeWidth: 3}))\r\n  ]\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"plot03 = Plot.plot({\r\n  caption: md`Figure 1. Plot of data for *${filt_type23}* soil type, ${filt_group23} soil group, in location **${filt_loc23}**.`,\r\n  height: 750,\r\n  width: (width - 70)/4,\r\n  marginLeft: 5,\r\n  marginRight: 5,\r\n  x: {label: \"CONE RESISTANCE, qc (MPa)\", domain: [0, 75]},\r\n  y: {label: null, reverse: true, domain: [0, 50]},\r\n  grid: true,\r\n  marks: [\r\n    Plot.frame(),\r\n    Plot.axisX({anchor: \"top\", labelAnchor: \"center\"}),\r\n    Plot.axisX({anchor: \"bottom\", label: null}),\r\n    Plot.axisY({anchor: \"left\", labelAnchor: \"center\", tickSpacing: 50}),\r\n    Plot.line(dt_cptu_small, {x: \"qc\", y: \"depth\", z: \"loc_id\", opacity: 0.25, strokeWidth: 2.5, tip: true, clip: true}),\r\n    Plot.text(dt_cptu_small, Plot.selectMaxY({x: \"qc\", y: \"depth\", text: \"depth\", frameAnchor: \"bottom-left\", dy: 10, fill: \"currentColor\", stroke: \"white\", strokeWidth: 3}))\r\n  ]\r\n})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"viewof strokew = Inputs.range([1, 5], {step: 0.1, value: 1, label: \"Stroke width:\"})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"import { square } from \"./utils.js\"\r\nsquare(strokew)\r\n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"viewof paramx = Inputs.select([\"qc\", \"Ic\"], {label: \"Parameter x:\"})\r\nviewof paramy = Inputs.select([\"depth\", \"fs\"], {label: \"Parameter y:\"})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-24","inline":false,"source":"viewof show = Inputs.toggle({label: \"Show?\"}) // show plot\r\n"},{"methodName":"interpret","cellName":"ojs-cell-25","inline":false,"source":"dt_cptu_plot = dt_cptu.filter((d) => d.soil_unit == \"F S\")\r\n\r\nimport { funcpl } from \"./utils.js\"\r\nfuncpl(dt_cptu_plot, dt_cptu_plot.map((d) => d.qc), dt_cptu_plot.map((d) => d.depth), show) // not needed? x, y directly from viewof?\r\nfuncpl(dt_cptu_plot, paramx, paramy, show, strokew)\r\n"},{"methodName":"interpret","cellName":"ojs-cell-26","inline":false,"source":"viewof showparams = Inputs.radio([\"hide\", \"show\"], {label: \"Additional?\", value: \"hide\"})\r\n"},{"methodName":"interpret","cellName":"ojs-cell-27","inline":false,"source":"import { showpar } from \"./utils.js\"\r\nshowpar(showparams)\r\n\r\n// smth doesn't quite work (see below)\r\n"},{"methodName":"interpret","cellName":"ojs-cell-28","inline":false,"source":"viewof fff = Inputs.form([\r\n      Inputs.range([0, 255], {step: 1, label: \"r\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"g\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"b\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"r\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"g\"}),\r\n      Inputs.range([0, 255], {step: 1, label: \"b\"})\r\n    ])\r\n"},{"methodName":"interpretQuiet","source":"shinyInput('dt_cptu_file')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_type')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_group')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_unit')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_loc')"},{"methodName":"interpretQuiet","source":"shinyInput('dt_cptu_table')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_type2')"},{"methodName":"interpretQuiet","source":"shinyInput('ddd')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_group2')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_unit2')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_loc2')"},{"methodName":"interpretQuiet","source":"shinyInput('plotdiv')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_type23')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_group23')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_unit23')"},{"methodName":"interpretQuiet","source":"shinyInput('filt_loc23')"},{"methodName":"interpretQuiet","source":"shinyInput('plotdiv2')"},{"methodName":"interpretQuiet","source":"shinyInput('strokew')"},{"methodName":"interpretQuiet","source":"shinyInput('paramx')"},{"methodName":"interpretQuiet","source":"shinyInput('paramy')"},{"methodName":"interpretQuiet","source":"shinyInput('show')"},{"methodName":"interpretQuiet","source":"shinyInput('showparams')"},{"methodName":"interpretQuiet","source":"shinyInput('fff')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /container fluid -->



</body></html>